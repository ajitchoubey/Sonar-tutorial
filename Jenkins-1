node {
  stage ('Clean workspace') {
    cleanWs()
}
  stage ('Build + SonarQube analysis'){
        def MSBUILD_SQ_SCANNER_HOME = tool 'SonarScanner_For_MSBuild'
        def DotnetProjectName='C:\JFL Project\SonarPOC\Sonar-tutorial\ConsoleApp4.sln'
        withSonarQubeEnv('SonarServer') {
          bat "dotnet ${MSBUILD_SQ_SCANNER_HOME}\\SonarScanner.MSBuild.dll begin /k:myKey"
          bat "dotnet build ${DotnetProjectName}"
          bat "dotnet ${MSBUILD_SQ_SCANNER_HOME}\\SonarScanner.MSBuild.dll end"
        }
     }
}


